@using MyLittleContentEngine.Services.Content.CodeAnalysis.SyntaxHighlighting
@inject ISyntaxHighlightingService HighlighterService

@((MarkupString) _highlightedCode)

@code {
    [Parameter] public string? Code { get; init; }

    string _highlightedCode = string.Empty;
    
    protected override async Task OnInitializedAsync()
    {
        if (string.IsNullOrEmpty(Code))
        {
            _highlightedCode = string.Empty;
            return;
        }
        
        var result = await HighlighterService.HighlightAsync(Code);
        _highlightedCode = result.Success ? $"<pre><code>{result.Html}</code></pre>" : $"<pre><code>{Code}</code></pre>";
        await base.OnInitializedAsync();
    }

}